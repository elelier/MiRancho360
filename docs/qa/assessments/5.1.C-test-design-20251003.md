# Test Design: Story 5.1.C

Date: 2025-10-03
Designer: Quinn (Test Architect)

## Test Strategy Overview

- Total test scenarios: 9
- Unit tests: 5 (56%)
- Integration tests: 1 (11%)
- E2E tests: 3 (33%)
- Priority distribution: P0: 3, P1: 5, P2: 1

## Test Scenarios by Acceptance Criteria

### CA-1: Estado de Éxito

| ID             | Level | Priority | Test Description                                                        | Justification |
|----------------|-------|----------|-------------------------------------------------------------------------|---------------|
| 5.1.C-UNIT-001 | Unit  | P1       | Assert success message + icon render for Input/Select/Textarea          | Pure render logic; fast regression guard |
| 5.1.C-UNIT-002 | Unit  | P0       | Ensure `error` dominates `success` when both props provided             | Prevents risk TECH-001 before integrating with forms |

### CA-2: Estado Disabled Mejorado

| ID             | Level | Priority | Test Description                                             | Justification |
|----------------|-------|----------|--------------------------------------------------------------|---------------|
| 5.1.C-UNIT-003 | Unit  | P1       | Snapshot/class assertion for disabled background/text/cursor | Style-only change, best caught via unit snapshot |

### CA-3: Focus Mejorado

| ID             | Level | Priority | Test Description                                                  | Justification |
|----------------|-------|----------|-------------------------------------------------------------------|---------------|
| 5.1.C-E2E-001  | E2E   | P1       | Keyboard tab cycle validates focus ring visibility across inputs  | Requires real browser to observe ring opacity + outline |

### CA-4: Contraste WCAG AA

| ID             | Level | Priority | Test Description                                            | Justification |
|----------------|-------|----------|-------------------------------------------------------------|---------------|
| 5.1.C-E2E-002  | E2E   | P0       | Lighthouse/axe accessibility audit on `/demo/input` variants | Compliance-critical; automated accessibility tooling needed |

### CA-5: Accesibilidad (aria, announcements, navegación)

| ID             | Level | Priority | Test Description                                                         | Justification |
|----------------|-------|----------|---------------------------------------------------------------------------|---------------|
| 5.1.C-UNIT-004 | Unit  | P0       | Verify aria attributes (aria-required, aria-invalid, describedby wiring) | Deterministic props mapping; fast unit feedback |
| 5.1.C-E2E-003  | E2E   | P1       | Screen reader smoke (NVDA/VoiceOver) announces error/success states       | Requires manual assistive tech validation |
| 5.1.C-INT-001  | Integration | P1 | Form-level test ensuring placeholder auto-hint coexists with custom copy | Exercises interaction between shared component and form state |

### CA-6: Tests

| ID             | Level | Priority | Test Description                                                | Justification |
|----------------|-------|----------|-----------------------------------------------------------------|---------------|
| 5.1.C-UNIT-005 | Unit  | P2       | Coverage gate for shared input suite (`npm run test -- Input`)  | Ensures regression suite maintained = target coverage |

## Risk Coverage

| Test ID         | Mitigates Risks |
|-----------------|-----------------|
| 5.1.C-UNIT-002  | TECH-001        |
| 5.1.C-INT-001   | TECH-001        |
| 5.1.C-E2E-001   | BUS-001         |
| 5.1.C-E2E-002   | BUS-001, OPS-001 |
| 5.1.C-E2E-003   | BUS-001         |
| 5.1.C-UNIT-004  | BUS-001         |
| 5.1.C-UNIT-005  | OPS-001         |

## Recommended Execution Order

1. 5.1.C-UNIT-002 (error vs success precedence)
2. 5.1.C-UNIT-004 (aria wiring)
3. 5.1.C-UNIT-001 (success rendering)
4. 5.1.C-UNIT-003 (disabled styles)
5. 5.1.C-UNIT-005 (coverage gate)
6. 5.1.C-INT-001 (form integration placeholder)
7. 5.1.C-E2E-002 (Lighthouse/axe)
8. 5.1.C-E2E-001 (keyboard focus traversal)
9. 5.1.C-E2E-003 (screen reader smoke)

---

Test design matrix: docs/qa/assessments/5.1.C-test-design-20251003.md
P0 tests identified: 3
