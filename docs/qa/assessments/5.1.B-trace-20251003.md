# Requirements Traceability Matrix

## Story: 5.1.B - Crear Componente Card Accesible

### Coverage Summary

- Total Requirements: 6
- Fully Covered: 4 (67%)
- Partially Covered: 0 (0%)
- Not Covered: 2 (33%)

### Requirement Mappings

#### CA-1: Card renderiza title, subtitle, children, footer e icon cuando se proveen

**Coverage: FULL**

- Test File: `src/components/common/__tests__/Card.test.tsx`
  - Test Case: `renders title, subtitle, children, and icon`
    - Given: Card renderizado con props completos
    - When: El componente se monta en el DOM
    - Then: Se muestran encabezado, subtitulo, cuerpo e icono
  - Test Case: `renders footer content when provided`
    - Given: Card con prop `footer`
    - When: Se renderiza
    - Then: Contenido del footer es visible
- Planned E2E: `5.1.B-E2E-001` (Dashboard wiring) para validar datos reales

#### CA-2: Variantes visuales (default, primary, warning, danger, success)

**Coverage: FULL**

- Test File: `src/components/common/__tests__/Card.test.tsx`
  - Test Case: `applies %s variant styles`
    - Given: Card parametrizado con cada variante
    - When: Se inspecciona `data-variant` y clases Tailwind
    - Then: Se aplican tokens esperados para fondo y borde
- Planned E2E: `5.1.B-E2E-002` Lighthouse/visual check en `/demo/card`

#### CA-3: Interactividad (clickable, role, keyboard)

**Coverage: FULL**

- Test File: `src/components/common/__tests__/Card.test.tsx`
  - Test Case: `exposes button semantics when clickable`
    - Given: Card clickable con handler
    - When: Click, Enter, Space (repeat) se disparan
    - Then: `role="button"`, `tabIndex=0`, y no hay activaciones repetidas
  - Test Case: `activates space key on keyup only once despite repeats`
    - Given: Card clickable con Space sostenido
    - When: `keydown` y `keyup` ocurren (incluyendo repeat)
    - Then: Handler se ejecuta una vez por ciclo
- Planned Integration: `5.1.B-INT-001` (navegacion) para garantías adicionales

#### CA-4: Responsive Design (padding y texto legible en mobile/desktop)

**Coverage: NONE**

- Pendiente ejecutar `5.1.B-E2E-003` con Playwright/Storybook viewports (375/768/1024)

#### CA-5: Tests unitarios pasan con cobertura >= 80%

**Coverage: FULL**

- Command: `npm run test -- run src/components/common/__tests__/Card.test.tsx`
  - Given: Suite de Card con cobertura instrumentada
  - When: Se ejecuta en CI/local
  - Then: 10 pruebas pasan, cobertura V8 reporta >= 80%

#### CA-6: Documentacion (README con ejemplos, props y variantes)

**Coverage: NONE**

- Requiere checklist editorial (`5.1.B-INT-002`) antes del release

### Critical Gaps

1. **Responsive validation pendiente** (CA-4)
   - Riesgo asociado: TECH-001
   - Acción: Ejecutar pruebas visuales en el sprint actual
2. **Revisión documental** (CA-6)
   - Riesgo asociado: OPS-001
   - Acción: Añadir Card.md a checklist editorial

### Test References

- Test design matrix: docs/qa/assessments/5.1.B-test-design-20251003.md
- P0 tests: 2 (5.1.B-UNIT-002, 5.1.B-UNIT-003)

---

Trace matrix: docs/qa/assessments/5.1.B-trace-20251003.md
